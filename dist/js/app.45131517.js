(function(){"use strict";var e={7396:function(e,t,a){var s=a(5130),l=a(6768);const i={id:"app"},o={class:"main-content"};function n(e,t,a,s,n,u){const r=(0,l.g2)("AppNavbar"),c=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(r),(0,l.Lk)("main",o,[(0,l.bF)(c)])])}var u=a(4232);const r={class:"navbar"},c={class:"nav-container"},d={class:"nav-links"},p={class:"nav-link user-email"};function v(e,t,a,s,i,o){const n=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("nav",r,[(0,l.Lk)("div",c,[(0,l.bF)(n,{to:"/",class:"nav-brand"},{default:(0,l.k6)((()=>t[1]||(t[1]=[(0,l.eW)("Quiz App")]))),_:1}),(0,l.Lk)("div",d,[(0,l.bF)(n,{to:"/",class:"nav-link"},{default:(0,l.k6)((()=>t[2]||(t[2]=[(0,l.eW)("Home")]))),_:1}),(0,l.bF)(n,{to:"/leaderboard",class:"nav-link"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)("Leaderboard")]))),_:1}),s.user&&s.isAdmin?((0,l.uX)(),(0,l.Wv)(n,{key:0,to:"/CreateQuizz",class:"nav-link"},{default:(0,l.k6)((()=>t[4]||(t[4]=[(0,l.eW)("Create Quiz")]))),_:1})):(0,l.Q3)("",!0),s.user?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(n,{to:"/profile",class:"nav-link"},{default:(0,l.k6)((()=>t[7]||(t[7]=[(0,l.eW)("Profile")]))),_:1}),(0,l.Lk)("span",p,(0,u.v_)(s.user.email),1),(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.handleLogout&&s.handleLogout(...e)),class:"nav-link logout-btn"},"Logout")],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.bF)(n,{to:"/Login",class:"nav-link"},{default:(0,l.k6)((()=>t[5]||(t[5]=[(0,l.eW)("Login")]))),_:1}),(0,l.bF)(n,{to:"/Signup",class:"nav-link"},{default:(0,l.k6)((()=>t[6]||(t[6]=[(0,l.eW)("Sign Up")]))),_:1})],64))])])])}a(4114);var m=a(1387),f=a(6400),k=a(7617),b=a(6971);const L={apiKey:"AIzaSyCVW0bgoxmAOfWG6zRquHiBScXyAFUg908",authDomain:"quizz-project-d8d8c.firebaseapp.com",projectId:"quizz-project-d8d8c",storageBucket:"quizz-project-d8d8c.firebasestorage.app",messagingSenderId:"475576911820",appId:"1:475576911820:web:be0e27546e0261e3cb7f69"},y=(0,f.Wp)(L),h=(0,k.aU)(y),g=(0,b.xI)(y);var z=a(144);const C=(0,z.KR)(null);g.onAuthStateChanged((e=>{console.log("User state change. Current user is:",e),C.value=e}));const q=()=>({user:C});var Q=q,w={name:"AppNavbar",setup(){const e=(0,m.rd)(),{user:t}=Q(),a=(0,z.KR)(!1),s=async e=>{if(e){const t=await(0,k.x7)((0,k.H9)(h,"users",e.uid)),s=t.data();a.value=!(!s||!s.admin)&&s.admin}else a.value=!1},i=async()=>{try{await g.signOut(),e.push("/")}catch(t){console.error("Error logging out:",t)}};return(0,l.sV)((async()=>{t.value&&await s(t.value)})),{user:t,isAdmin:a,handleLogout:i}}},_=a(1241);const E=(0,_.A)(w,[["render",v],["__scopeId","data-v-73525579"]]);var R=E,K={components:{AppNavbar:R}};const A=(0,_.A)(K,[["render",n]]);var X=A;a(8111),a(3579);const D={class:"home"},S={key:0};function T(e,t,a,s,i,o){const n=(0,l.g2)("listQuiz");return(0,l.uX)(),(0,l.CE)("div",D,[s.user?((0,l.uX)(),(0,l.CE)("h1",S,"Hello "+(0,u.v_)(s.user.displayName),1)):(0,l.Q3)("",!0),(0,l.bF)(n)])}const U={class:"quiz-list"},x={class:"list-header"},F={class:"quiz-info"},V={class:"quiz-title"},I={class:"quiz-meta"},M={class:"quiz-meta"},G={key:0,class:"admin-actions"},H=["onClick","disabled"],W=["onClick","disabled"],J={key:1,class:"modal"},P={class:"modal-content"},O={class:"modal-actions"},N=["disabled"];function B(e,t,a,s,i,o){const n=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",U,[(0,l.Lk)("div",x,[t[3]||(t[3]=(0,l.Lk)("h1",{class:"list-title"},"List of Quizzes",-1)),s.isAdmin?((0,l.uX)(),(0,l.Wv)(n,{key:0,to:"/CreateQuizz",class:"create-quiz-btn"},{default:(0,l.k6)((()=>t[2]||(t[2]=[(0,l.eW)(" Create New Quiz ")]))),_:1})):(0,l.Q3)("",!0)]),s.message?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,u.C4)(["alert",`alert-${s.messageType}`])},(0,u.v_)(s.message),3)):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.quizzes,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"quiz-card"},[(0,l.bF)(n,{to:{name:"quizdetail",params:{id:e.id}},class:"quiz-link"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",F,[(0,l.Lk)("h2",V,(0,u.v_)(e.title),1),(0,l.Lk)("p",I,"Topic: "+(0,u.v_)(e.topic),1),(0,l.Lk)("p",M,"Difficulty: "+(0,u.v_)(e.difficulty),1)])])),_:2},1032,["to"]),s.isAdmin?((0,l.uX)(),(0,l.CE)("div",G,[(0,l.Lk)("button",{onClick:t=>s.editQuiz(e),class:"btn btn-edit",disabled:s.isLoading},t[4]||(t[4]=[(0,l.Lk)("i",{class:"fas fa-edit"},null,-1),(0,l.eW)(" Edit ")]),8,H),(0,l.Lk)("button",{onClick:t=>s.confirmDelete(e),class:"btn btn-delete",disabled:s.isLoading},t[5]||(t[5]=[(0,l.Lk)("i",{class:"fas fa-trash-alt"},null,-1),(0,l.eW)(" Delete ")]),8,W)])):(0,l.Q3)("",!0)])))),128)),s.showDeleteModal?((0,l.uX)(),(0,l.CE)("div",J,[(0,l.Lk)("div",P,[t[6]||(t[6]=(0,l.Lk)("h3",null,"Confirm Delete",-1)),(0,l.Lk)("p",null,'Are you sure you want to delete "'+(0,u.v_)(s.selectedQuiz?.title)+'"?',1),t[7]||(t[7]=(0,l.Lk)("p",{class:"warning"},"This action cannot be undone!",-1)),(0,l.Lk)("div",O,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.deleteQuiz&&s.deleteQuiz(...e)),class:"btn btn-delete",disabled:s.isLoading},(0,u.v_)(s.isLoading?"Deleting...":"Delete"),9,N),(0,l.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.cancelDelete&&s.cancelDelete(...e)),class:"btn btn-secondary"},"Cancel")])])])):(0,l.Q3)("",!0)])}a(7588);var j={setup(){const e=(0,z.KR)([]),t=(0,z.KR)(!1),a=(0,m.rd)(),s=(0,z.KR)(!1),i=(0,z.KR)(""),o=(0,z.KR)("success"),n=(0,z.KR)(!1),u=(0,z.KR)(null),r=(e,t="success")=>{i.value=e,o.value=t,setTimeout((()=>{i.value=""}),3e3)},c=async()=>{try{s.value=!0;const t=await(0,k.GG)((0,k.rJ)(h,"Quizzes"));e.value=[],t.forEach((t=>{e.value.push({id:t.id,...t.data()})}))}catch(t){r("Error loading quizzes: "+t.message,"error")}finally{s.value=!1}},d=async e=>{if(e){const a=await(0,k.x7)((0,k.H9)(h,"users",e.uid));t.value=a.data()?.admin??!1}else t.value=!1},p=e=>{a.push({name:"editQuiz",params:{id:e.id}})},v=e=>{u.value=e,n.value=!0},f=()=>{u.value=null,n.value=!1},L=async()=>{if(u.value)try{s.value=!0,await(0,k.kd)((0,k.H9)(h,"Quizzes",u.value.id)),r(`Quiz "${u.value.title}" has been deleted`),await c()}catch(e){r("Error deleting quiz: "+e.message,"error")}finally{s.value=!1,n.value=!1,u.value=null}};return(0,l.sV)((()=>{c(),(0,b.hg)(g,d)})),{quizzes:e,isAdmin:t,editQuiz:p,deleteQuiz:L,isLoading:s,message:i,messageType:o,showDeleteModal:n,selectedQuiz:u,confirmDelete:v,cancelDelete:f}}};const $=(0,_.A)(j,[["render",B],["__scopeId","data-v-f447718e"]]);var Y=$,Z={components:{listQuiz:Y},setup(){const e=(0,z.KR)(null),t=(0,z.KR)(null);return(0,l.sV)((()=>{(0,b.hg)(g,(async a=>{if(a){e.value=a;const s=await(0,k.x7)((0,k.H9)(h,"users",a.uid));t.value=s.data()?.admin??!1}}))})),{user:e,is_admin:t}}};const ee=(0,_.A)(Z,[["render",T],["__scopeId","data-v-66dbb328"]]);var te=ee;const ae={class:"form-container"},se={class:"form-group"},le={class:"form-group"},ie={class:"form-group"},oe={class:"form-group checkbox-group"},ne={class:"error",role:"alert"};function ue(e,t,a,i,o,n){return(0,l.uX)(),(0,l.CE)("div",ae,[(0,l.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)(((...e)=>i.createUser&&i.createUser(...e)),["prevent"])),class:"auth-form"},[t[6]||(t[6]=(0,l.Lk)("h2",{class:"form-title"},"Create Account",-1)),(0,l.Lk)("div",se,[(0,l.bo)((0,l.Lk)("input",{type:"text",required:"",placeholder:"Display name","onUpdate:modelValue":t[0]||(t[0]=e=>i.displayName=e),"aria-label":"Display name"},null,512),[[s.Jo,i.displayName]])]),(0,l.Lk)("div",le,[(0,l.bo)((0,l.Lk)("input",{type:"email",required:"",placeholder:"Your email","onUpdate:modelValue":t[1]||(t[1]=e=>i.email=e),"aria-label":"Email address"},null,512),[[s.Jo,i.email]])]),(0,l.Lk)("div",ie,[(0,l.bo)((0,l.Lk)("input",{type:"password",required:"",placeholder:"Your password","onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),"aria-label":"Password"},null,512),[[s.Jo,i.password]])]),(0,l.Lk)("div",oe,[t[5]||(t[5]=(0,l.Lk)("label",{for:"admin-checkbox"},"Role: Admin?",-1)),(0,l.bo)((0,l.Lk)("input",{type:"checkbox",id:"admin-checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>i.admin=e),"aria-label":"Administrator role"},null,512),[[s.lH,i.admin]])]),t[7]||(t[7]=(0,l.Lk)("button",{type:"submit",class:"btn btn-success"},"Sign up",-1)),(0,l.Lk)("div",ne,(0,u.v_)(i.errors),1)],32)])}var re={setup(){const e=(0,z.KR)(""),t=(0,z.KR)(""),a=(0,z.KR)(""),s=(0,z.KR)(null),l=(0,z.KR)(!1),i=()=>{(0,b.eJ)(g,t.value,a.value).then((async a=>{const s=a.user;return await(0,k.BN)((0,k.H9)(h,"users",s.uid),{name:e.value,email:t.value,admin:l.value}),(0,b.r7)(s,{displayName:e.value})})).then((()=>{ja.push("/")})).catch((e=>{s.value=e.message}))};return{displayName:e,email:t,password:a,errors:s,admin:l,createUser:i}}};const ce=(0,_.A)(re,[["render",ue],["__scopeId","data-v-cdd0eae0"]]);var de=ce;const pe={class:"form-container"},ve={class:"form-group"},me={class:"form-group"},fe={class:"error"};function ke(e,t,a,i,o,n){return(0,l.uX)(),(0,l.CE)("div",pe,[(0,l.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.login&&i.login(...e)),["prevent"])),class:"auth-form"},[t[3]||(t[3]=(0,l.Lk)("h2",{class:"form-title"},"Login",-1)),(0,l.Lk)("div",ve,[(0,l.bo)((0,l.Lk)("input",{type:"email",required:"",placeholder:"Your email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e)},null,512),[[s.Jo,i.email]])]),(0,l.Lk)("div",me,[(0,l.bo)((0,l.Lk)("input",{type:"password",required:"",placeholder:"Your password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e)},null,512),[[s.Jo,i.password]])]),t[4]||(t[4]=(0,l.Lk)("button",{type:"submit",class:"btn btn-success"},"Login",-1)),(0,l.Lk)("div",fe,(0,u.v_)(i.errors),1)],32)])}var be={setup(){const e=(0,z.KR)(""),t=(0,z.KR)(""),a=(0,z.KR)(null),s=()=>{(0,b.x9)(g,e.value,t.value).then((e=>{const t=e.user;console.log(t)})).then((()=>{ja.push("/")})).catch((e=>{a.value=e.message}))};return{email:e,password:t,errors:a,login:s}}};const Le=(0,_.A)(be,[["render",ke],["__scopeId","data-v-7451089b"]]);var ye=Le;const he={class:"form-container"},ge={class:"auth-form"},ze={class:"creation-method"},Ce={class:"method-options"},qe={class:"form-group"},Qe={class:"form-group"},we={class:"form-group"},_e={class:"radio-group"},Ee={class:"radio-label"},Re={class:"radio-label"},Ke={class:"radio-label"},Ae={key:1,class:"trivia-section"},Xe={key:2},De=["onUpdate:modelValue"],Se={class:"options-grid"},Te=["onUpdate:modelValue","placeholder"],Ue=["onUpdate:modelValue"],xe={key:0,class:"button-group"};function Fe(e,t,a,i,o,n){const r=(0,l.g2)("OpenTriviaDB"),c=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",he,[(0,l.Lk)("div",ge,[t[20]||(t[20]=(0,l.Lk)("h1",{class:"form-title"},"Create a Quiz",-1)),(0,l.Lk)("div",ze,[t[9]||(t[9]=(0,l.Lk)("h3",null,"Choose Quiz Creation Method",-1)),(0,l.Lk)("div",Ce,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=e=>i.setCreationMethod("api")),class:(0,u.C4)(["btn method-btn",{active:"api"===i.creationMethod}])}," Generate from Open Trivia DB ",2),(0,l.Lk)("button",{onClick:t[1]||(t[1]=e=>i.setCreationMethod("manual")),class:(0,u.C4)(["btn method-btn",{active:"manual"===i.creationMethod}])}," Create Manually ",2)])]),(0,l.Lk)("form",{onSubmit:t[8]||(t[8]=(0,s.D$)(((...e)=>i.createQuizz&&i.createQuizz(...e)),["prevent"]))},[(0,l.Lk)("div",qe,[t[10]||(t[10]=(0,l.Lk)("label",{for:"title"},"Title",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>i.title=e),class:"form-input",placeholder:"Enter quiz title",required:""},null,512),[[s.Jo,i.title]])]),"manual"===i.creationMethod?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("div",Qe,[t[11]||(t[11]=(0,l.Lk)("label",{for:"topic"},"Topic",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>i.topic=e),class:"form-input",placeholder:"Enter quiz topic"},null,512),[[s.Jo,i.topic]])]),(0,l.Lk)("div",we,[t[15]||(t[15]=(0,l.Lk)("label",{for:"difficulty"},"Difficulty",-1)),(0,l.Lk)("div",_e,[(0,l.Lk)("label",Ee,[(0,l.bo)((0,l.Lk)("input",{type:"radio",value:"Easy","onUpdate:modelValue":t[4]||(t[4]=e=>i.difficulty=e)},null,512),[[s.XL,i.difficulty]]),t[12]||(t[12]=(0,l.eW)(" Easy "))]),(0,l.Lk)("label",Re,[(0,l.bo)((0,l.Lk)("input",{type:"radio",value:"Medium","onUpdate:modelValue":t[5]||(t[5]=e=>i.difficulty=e)},null,512),[[s.XL,i.difficulty]]),t[13]||(t[13]=(0,l.eW)(" Medium "))]),(0,l.Lk)("label",Ke,[(0,l.bo)((0,l.Lk)("input",{type:"radio",value:"Hard","onUpdate:modelValue":t[6]||(t[6]=e=>i.difficulty=e)},null,512),[[s.XL,i.difficulty]]),t[14]||(t[14]=(0,l.eW)(" Hard "))])])])],64)):(0,l.Q3)("",!0),"api"===i.creationMethod?((0,l.uX)(),(0,l.CE)("div",Ae,[t[16]||(t[16]=(0,l.Lk)("h3",null,"Generate Questions from Open Trivia DB",-1)),(0,l.bF)(r,{onQuestionsGenerated:i.handleQuestionsGenerated,onTopicSelected:i.handleTopicSelected,onDifficultySelected:i.handleDifficultySelected},null,8,["onQuestionsGenerated","onTopicSelected","onDifficultySelected"])])):(0,l.Q3)("",!0),"manual"===i.creationMethod||i.questions.length>0?((0,l.uX)(),(0,l.CE)("div",Xe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.questions,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"question-group"},[t[17]||(t[17]=(0,l.Lk)("p",{class:"instruction-text"},"If it is a true/false question, type true in option 1, false in option 2 and the correct answer in the correct answer field",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.question=t,class:"form-input",placeholder:"Enter a question"},null,8,De),[[s.Jo,e.question]]),(0,l.Lk)("div",Se,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.options,((t,a)=>(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:a,type:"text","onUpdate:modelValue":t=>e.options[a]=t,placeholder:`Option ${a+1}`,class:"form-input"},null,8,Te)),[[s.Jo,e.options[a]]]))),128))]),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.correctAnswer=t,placeholder:"Correct answer",class:"form-input"},null,8,Ue),[[s.Jo,e.correctAnswer]])])))),128)),"manual"===i.creationMethod?((0,l.uX)(),(0,l.CE)("div",xe,[(0,l.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.addQuestion&&i.addQuestion(...e)),type:"button",class:"btn btn-secondary"},"Add Question")])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),t[18]||(t[18]=(0,l.Lk)("div",{class:"button-group"},[(0,l.Lk)("button",{class:"btn btn-success",type:"submit"},"Save Quiz")],-1))],32),(0,l.bF)(c,{to:"/",class:"home-link"},{default:(0,l.k6)((()=>t[19]||(t[19]=[(0,l.eW)("Back to Home")]))),_:1})])])}const Ve={class:"trivia-form"},Ie={class:"form-group"},Me={class:"form-group"},Ge=["value"],He={class:"form-group"},We=["disabled"];function Je(e,t,a,i,o,n){return(0,l.uX)(),(0,l.CE)("div",Ve,[(0,l.Lk)("div",Ie,[t[4]||(t[4]=(0,l.Lk)("label",{for:"numQuestions"},"Number of Questions",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>i.numQuestions=e),min:"1",max:"50",class:"form-input",placeholder:"Enter number of questions (1-50)"},null,512),[[s.Jo,i.numQuestions]])]),(0,l.Lk)("div",Me,[t[6]||(t[6]=(0,l.Lk)("label",{for:"topic"},"Topic",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedTopic=e),class:"form-input"},[t[5]||(t[5]=(0,l.Lk)("option",{value:""},"Any Topic",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.topics,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,u.v_)(e.name),9,Ge)))),128))],512),[[s.u1,i.selectedTopic]])]),(0,l.Lk)("div",He,[t[8]||(t[8]=(0,l.Lk)("label",{for:"difficulty"},"Difficulty",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.difficulty=e),class:"form-input"},t[7]||(t[7]=[(0,l.Lk)("option",{value:""},"Any Difficulty",-1),(0,l.Lk)("option",{value:"easy"},"Easy",-1),(0,l.Lk)("option",{value:"medium"},"Medium",-1),(0,l.Lk)("option",{value:"hard"},"Hard",-1)]),512),[[s.u1,i.difficulty]])]),(0,l.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.fetchQuestions&&i.fetchQuestions(...e)),class:"btn btn-primary",disabled:i.isLoading},(0,u.v_)(i.isLoading?"Loading...":"Generate Questions"),9,We)])}a(1701);var Pe={name:"OpenTriviaDB",emits:["questionsGenerated","topicSelected","difficultySelected"],setup(e,{emit:t}){const a=(0,z.KR)(10),s=(0,z.KR)(""),i=(0,z.KR)(""),o=(0,z.KR)([]),n=(0,z.KR)(!1),u=async()=>{try{const e=await fetch("https://opentdb.com/api_category.php"),t=await e.json();o.value=t.trivia_categories}catch(e){console.error("Error fetching topics:",e)}},r=async()=>{if(!a.value||a.value<1||a.value>50)alert("Please enter a valid number of questions (1-50)");else{n.value=!0;try{let e=`https://opentdb.com/api.php?amount=${a.value}`;s.value&&(e+=`&category=${s.value}`),i.value&&(e+=`&difficulty=${i.value}`);const l=await fetch(e),o=await l.json();if(o.results&&o.results.length>0){const e=o.results[0].category;let a="Medium";"easy"===i.value?a="Easy":"hard"===i.value&&(a="Hard"),t("topicSelected",e),t("difficultySelected",a);const s=o.results.map((e=>({question:e.question,options:[...e.incorrect_answers,e.correct_answer].sort((()=>Math.random()-.5)),correctAnswer:e.correct_answer})));t("questionsGenerated",s)}else alert("Error fetching questions. Please try again.")}catch(e){console.error("Error fetching questions:",e),alert("Error fetching questions. Please try again.")}finally{n.value=!1}}};return(0,l.sV)(u),{numQuestions:a,selectedTopic:s,difficulty:i,topics:o,isLoading:n,fetchQuestions:r}}};const Oe=(0,_.A)(Pe,[["render",Je],["__scopeId","data-v-fa85a772"]]);var Ne=Oe,Be={components:{OpenTriviaDB:Ne},setup(){const e=(0,z.KR)([]),t=(0,z.KR)(""),a=(0,z.KR)(""),s=(0,z.KR)(null),l=(0,z.KR)("manual"),i=(0,m.rd)(),o=t=>{l.value=t,"api"===t&&(a.value="",s.value=null,e.value=[])},n=()=>{e.value.push({question:"",options:["","",""],correctAnswer:""})},u=t=>{e.value=t},r=e=>{a.value=e},c=e=>{s.value=e},d=async()=>{if(t.value)if(0!==e.value.length)try{await(0,k.gS)((0,k.rJ)(h,"Quizzes"),{title:t.value,topic:a.value,difficulty:s.value,questions:e.value}),i.push("/")}catch(l){console.error("Error creating quiz:",l),alert("Error creating quiz. Please try again.")}else alert("Please add at least one question or generate questions from the API");else alert("Please enter a quiz title")};return{questions:e,title:t,topic:a,difficulty:s,creationMethod:l,setCreationMethod:o,addQuestion:n,handleQuestionsGenerated:u,handleTopicSelected:r,handleDifficultySelected:c,createQuizz:d}}};const je=(0,_.A)(Be,[["render",Fe],["__scopeId","data-v-7a317c0f"]]);var $e=je;const Ye={class:"container"},Ze={class:"card"},et={class:"quiz-title"},tt={class:"quiz-meta"},at={class:"meta-item"},st={class:"meta-item"},lt={key:0,class:"quiz-container"},it={key:0,class:"question-card"},ot={class:"question-title"},nt={class:"question-text"},ut=["onSubmit"],rt={class:"form-group"},ct={class:"option-label"},dt=["value","disabled"],pt={class:"option-text"},vt={key:0,class:"feedback-message"},mt={class:"button-group"},ft=["disabled"],kt=["disabled"],bt={key:1,class:"results-container"},Lt={class:"score-container"},yt={class:"score-text"},ht={class:"percentage"},gt={class:"feedback-message"},zt={class:"feedback-subtext"},Ct={class:"button-group"};function qt(e,t,a,i,o,n){const r=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Ye,[(0,l.Lk)("div",Ze,[(0,l.Lk)("h1",et,(0,u.v_)(i.title),1),(0,l.Lk)("div",tt,[(0,l.Lk)("span",at,"Topic: "+(0,u.v_)(i.topic),1),(0,l.Lk)("span",st,"Difficulty: "+(0,u.v_)(i.difficulty),1)])]),i.showResults?((0,l.uX)(),(0,l.CE)("div",bt,[t[4]||(t[4]=(0,l.Lk)("h2",{class:"results-title"},"Quiz Results",-1)),(0,l.Lk)("div",Lt,[(0,l.Lk)("p",yt,"Your Score: "+(0,u.v_)(i.correctAnswers)+"/"+(0,u.v_)(i.questions.length),1),(0,l.Lk)("p",ht,(0,u.v_)(Math.round(i.correctAnswers/i.questions.length*100))+"%",1),(0,l.Lk)("div",{class:(0,u.C4)(["feedback-container",i.performanceClass])},[(0,l.Lk)("p",gt,(0,u.v_)(i.performanceFeedback),1),(0,l.Lk)("p",zt,(0,u.v_)(i.performanceSubtext),1)],2)]),(0,l.Lk)("div",Ct,[(0,l.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.resetQuiz&&i.resetQuiz(...e)),class:"btn btn-secondary"},"Try Again"),(0,l.bF)(r,{to:"/",class:"btn btn-success"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)("Back to Home")]))),_:1})])])):((0,l.uX)(),(0,l.CE)("div",lt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.questions,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a},[a===i.current_question?((0,l.uX)(),(0,l.CE)("div",it,[(0,l.Lk)("h2",ot,"Question "+(0,u.v_)(a+1)+" of "+(0,u.v_)(i.questions.length),1),(0,l.Lk)("p",nt,(0,u.v_)(e.question),1),(0,l.Lk)("form",{onSubmit:(0,s.D$)((e=>i.submitAnswer(a)),["prevent"]),class:"answer-form"},[(0,l.Lk)("div",rt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.options,((a,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:(0,u.C4)(["answer-option",{correct:i.showFeedback&&a===e.correctAnswer,incorrect:i.showFeedback&&i.c_answer===a&&a!==e.correctAnswer,selected:i.c_answer===a}])},[(0,l.Lk)("label",ct,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"option",value:a,"onUpdate:modelValue":t[0]||(t[0]=e=>i.c_answer=e),class:"option-input",disabled:i.showFeedback},null,8,dt),[[s.XL,i.c_answer]]),(0,l.Lk)("span",pt,(0,u.v_)(a),1)])],2)))),128))]),i.showFeedback?((0,l.uX)(),(0,l.CE)("div",vt,[(0,l.Lk)("p",{class:(0,u.C4)(i.isCorrect?"correct-message":"incorrect-message")},(0,u.v_)(i.isCorrect?"Correct!":`Incorrect. The correct answer is: ${e.correctAnswer}`),3)])):(0,l.Q3)("",!0),(0,l.Lk)("div",mt,[(0,l.Lk)("button",{type:"submit",class:"btn",disabled:!i.c_answer||i.showFeedback},"Submit Answer",8,ft),(0,l.Lk)("button",{type:"button",class:(0,u.C4)(["btn",i.isLastQuestion?"btn-success":"btn-secondary"]),onClick:t[1]||(t[1]=e=>i.isLastQuestion?i.finishQuiz():i.nextQuestion()),disabled:!i.showFeedback},(0,u.v_)(i.isLastQuestion?"Finish Quiz":"Next Question"),11,kt)])],40,ut)])):(0,l.Q3)("",!0)])))),128))]))])}var Qt={setup(){const e=(0,z.KR)(""),t=(0,z.KR)(""),a=(0,z.KR)(null),s=(0,z.KR)([]),i=(0,z.KR)(0),o=(0,m.lq)(),n=(0,z.KR)(null),u=o.params.id,r=(0,z.KR)(!1),c=(0,z.KR)(!1),d=(0,z.KR)(!1),p=(0,z.KR)(0),v=(0,l.EW)((()=>i.value===s.value.length-1)),f=async()=>{const l=await(0,k.x7)((0,k.H9)(h,"Quizzes",u));e.value=l.data().title,t.value=l.data().topic,a.value=l.data().difficulty,s.value=l.data().questions},b=async()=>{if(!g.currentUser)return;const l=p.value/s.value.length*100;await(0,k.gS)((0,k.rJ)(h,"quiz_results"),{userId:g.currentUser.uid,quizId:u,quizTitle:e.value,topic:t.value,difficulty:a.value,score:p.value,totalQuestions:s.value.length,percentage:l,timestamp:new Date,displayName:g.currentUser.displayName});const i=(0,k.H9)(h,"users",g.currentUser.uid),o=await(0,k.x7)(i);if(o.exists()){const e=o.data(),t=e.quizzesTaken||0,a=e.averageScore||0,s=t+1,n=0===t?l:(a*t+l)/s;await(0,k.mZ)(i,{totalScore:(e.totalScore||0)+p.value,quizzesTaken:s,averageScore:n})}else await(0,k.BN)(i,{displayName:g.currentUser.displayName,email:g.currentUser.email,totalScore:p.value,quizzesTaken:1,averageScore:l})};(0,l.sV)(f);const L=e=>{const t=s.value[e];null!=n.value&&(r.value=!0,c.value=n.value===t.correctAnswer,c.value&&p.value++)},y=()=>{i.value++,n.value=null,r.value=!1,c.value=!1},C=async()=>{d.value=!0,await b()},q=()=>{i.value=0,n.value=null,r.value=!1,c.value=!1,d.value=!1,p.value=0},Q=(0,l.EW)((()=>{const e=p.value/s.value.length*100;return e>=90?"excellent":e>=70?"good":e>=50?"fair":"poor"})),w=(0,l.EW)((()=>{const e=p.value/s.value.length*100;return e>=90?"Excellent Work! ðŸŽ‰":e>=70?"Good Job! ðŸ‘":e>=50?"Not Bad! ðŸ˜Š":"Keep Practicing! ðŸ’ª"})),_=(0,l.EW)((()=>{const e=p.value/s.value.length*100;return e>=90?"You have mastered this topic!":e>=70?"You have a good understanding of the material.":e>=50?"You have a basic understanding, but there's room for improvement.":"Don't worry, practice makes perfect!"}));return{title:e,topic:t,difficulty:a,questions:s,current_question:i,c_answer:n,submitAnswer:L,nextQuestion:y,showFeedback:r,isCorrect:c,isLastQuestion:v,showResults:d,correctAnswers:p,finishQuiz:C,resetQuiz:q,performanceClass:Q,performanceFeedback:w,performanceSubtext:_}}};const wt=(0,_.A)(Qt,[["render",qt],["__scopeId","data-v-2d05c822"]]);var _t=wt;const Et={class:"form-container"},Rt={class:"auth-form"},Kt={class:"form-group"},At={class:"form-group"},Xt={class:"form-group"},Dt={class:"radio-group"},St={class:"radio-label"},Tt={class:"radio-label"},Ut={class:"radio-label"},xt={class:"trivia-section"},Ft={class:"question-number"},Vt=["onUpdate:modelValue"],It={class:"options-grid"},Mt=["onUpdate:modelValue","placeholder"],Gt=["onUpdate:modelValue"],Ht=["onClick"],Wt={class:"button-group"};function Jt(e,t,a,i,o,n){const r=(0,l.g2)("OpenTriviaDB"),c=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Et,[(0,l.Lk)("div",Rt,[t[16]||(t[16]=(0,l.Lk)("h1",{class:"form-title"},"Edit Quiz",-1)),(0,l.Lk)("form",{onSubmit:t[6]||(t[6]=(0,s.D$)(((...e)=>i.updateQuiz&&i.updateQuiz(...e)),["prevent"]))},[(0,l.Lk)("div",Kt,[t[7]||(t[7]=(0,l.Lk)("label",{for:"title"},"Title",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.title=e),class:"form-input",placeholder:"Enter quiz title"},null,512),[[s.Jo,i.title]])]),(0,l.Lk)("div",At,[t[8]||(t[8]=(0,l.Lk)("label",{for:"topic"},"Topic",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.topic=e),class:"form-input",placeholder:"Enter quiz topic",readonly:""},null,512),[[s.Jo,i.topic]])]),(0,l.Lk)("div",Xt,[t[12]||(t[12]=(0,l.Lk)("label",{for:"difficulty"},"Difficulty",-1)),(0,l.Lk)("div",Dt,[(0,l.Lk)("label",St,[(0,l.bo)((0,l.Lk)("input",{type:"radio",value:"Easy","onUpdate:modelValue":t[2]||(t[2]=e=>i.difficulty=e)},null,512),[[s.XL,i.difficulty]]),t[9]||(t[9]=(0,l.eW)(" Easy "))]),(0,l.Lk)("label",Tt,[(0,l.bo)((0,l.Lk)("input",{type:"radio",value:"Medium","onUpdate:modelValue":t[3]||(t[3]=e=>i.difficulty=e)},null,512),[[s.XL,i.difficulty]]),t[10]||(t[10]=(0,l.eW)(" Medium "))]),(0,l.Lk)("label",Ut,[(0,l.bo)((0,l.Lk)("input",{type:"radio",value:"Hard","onUpdate:modelValue":t[4]||(t[4]=e=>i.difficulty=e)},null,512),[[s.XL,i.difficulty]]),t[11]||(t[11]=(0,l.eW)(" Hard "))])])]),(0,l.Lk)("div",xt,[t[13]||(t[13]=(0,l.Lk)("h3",null,"Generate New Questions from Open Trivia DB",-1)),(0,l.bF)(r,{onQuestionsGenerated:i.handleQuestionsGenerated,onDifficultySelected:i.handleDifficultySelected},null,8,["onQuestionsGenerated","onDifficultySelected"])]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.questions,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"question-group"},[(0,l.Lk)("h3",Ft,"Question "+(0,u.v_)(t+1),1),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.question=t,class:"form-input",placeholder:"Enter a question"},null,8,Vt),[[s.Jo,e.question]]),(0,l.Lk)("div",It,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.options,((t,a)=>(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:a,type:"text","onUpdate:modelValue":t=>e.options[a]=t,placeholder:`Option ${a+1}`,class:"form-input"},null,8,Mt)),[[s.Jo,e.options[a]]]))),128))]),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.correctAnswer=t,placeholder:"Correct answer",class:"form-input"},null,8,Gt),[[s.Jo,e.correctAnswer]]),(0,l.Lk)("button",{type:"button",onClick:e=>i.removeQuestion(t),class:"btn btn-delete"},"Remove Question",8,Ht)])))),128)),(0,l.Lk)("div",Wt,[(0,l.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.addQuestion&&i.addQuestion(...e)),type:"button",class:"btn btn-secondary"},"Add Question"),t[14]||(t[14]=(0,l.Lk)("button",{class:"btn btn-success",type:"submit"},"Save Changes",-1))])],32),(0,l.bF)(c,{to:"/",class:"home-link"},{default:(0,l.k6)((()=>t[15]||(t[15]=[(0,l.eW)("Back to Home")]))),_:1})])])}var Pt={components:{OpenTriviaDB:Ne},setup(){const e=(0,z.KR)([]),t=(0,z.KR)(""),a=(0,z.KR)(""),s=(0,z.KR)(null),i=(0,m.lq)(),o=(0,m.rd)(),n=i.params.id,u=async()=>{const l=await(0,k.x7)((0,k.H9)(h,"Quizzes",n));if(l.exists()){const i=l.data();t.value=i.title,a.value=i.topic,s.value=i.difficulty,e.value=i.questions}},r=()=>{e.value.push({question:"",options:["","",""],correctAnswer:""})},c=t=>{e.value.splice(t,1)},d=t=>{e.value=t},p=e=>{s.value=e},v=async()=>{try{await(0,k.mZ)((0,k.H9)(h,"Quizzes",n),{title:t.value,topic:a.value,difficulty:s.value,questions:e.value}),o.push("/")}catch(l){console.error("Error updating quiz:",l)}};return(0,l.sV)(u),{questions:e,title:t,topic:a,difficulty:s,addQuestion:r,removeQuestion:c,handleQuestionsGenerated:d,handleDifficultySelected:p,updateQuiz:v}}};const Ot=(0,_.A)(Pt,[["render",Jt],["__scopeId","data-v-5fcd0bcb"]]);var Nt=Ot;const Bt={class:"profile-container"},jt={class:"profile-card"},$t={class:"profile-header"},Yt={class:"user-info"},Zt={class:"quiz-history"},ea={key:0,class:"history-list"},ta={class:"quiz-info"},aa={class:"quiz-meta"},sa={class:"score-info"},la={class:"score"},ia={class:"date"},oa={key:0,class:"admin-actions"},na=["onClick"],ua=["onClick"],ra={key:1,class:"no-history"},ca={key:0,class:"modal"},da={class:"modal-content"},pa={class:"modal-actions"},va=["disabled"];function ma(e,t,a,s,i,o){const n=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Bt,[(0,l.Lk)("div",jt,[(0,l.Lk)("div",$t,[t[2]||(t[2]=(0,l.Lk)("h1",{class:"profile-title"},"Profile",-1)),(0,l.Lk)("div",Yt,[(0,l.Lk)("h2",null,(0,u.v_)(s.user&&s.user.displayName),1),(0,l.Lk)("p",null,(0,u.v_)(s.user&&s.user.email),1)])]),(0,l.Lk)("div",Zt,[t[7]||(t[7]=(0,l.Lk)("h2",{class:"section-title"},"Quiz History",-1)),s.quizHistory.length>0?((0,l.uX)(),(0,l.CE)("div",ea,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.quizHistory,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"history-item"},[(0,l.Lk)("div",ta,[(0,l.Lk)("h3",null,(0,u.v_)(e.quizTitle),1),(0,l.Lk)("p",aa,[(0,l.Lk)("span",null,"Topic: "+(0,u.v_)(e.topic),1),(0,l.Lk)("span",null,"Difficulty: "+(0,u.v_)(e.difficulty),1)])]),(0,l.Lk)("div",sa,[(0,l.Lk)("div",la,(0,u.v_)(e.score)+"/"+(0,u.v_)(e.totalQuestions)+" ("+(0,u.v_)(Math.round(e.score/e.totalQuestions*100))+"%) ",1),(0,l.Lk)("div",ia,(0,u.v_)(new Date(e.timestamp).toLocaleDateString()),1)]),(0,l.Lk)("div",{class:(0,u.C4)(["performance",s.getPerformanceClass(e.score/e.totalQuestions)])},(0,u.v_)(s.getPerformanceText(e.score/e.totalQuestions)),3),s.isAdmin?((0,l.uX)(),(0,l.CE)("div",oa,[(0,l.Lk)("button",{onClick:t=>s.editQuiz(e),class:"btn btn-edit"},t[3]||(t[3]=[(0,l.Lk)("i",{class:"fas fa-edit"},null,-1),(0,l.eW)(" Edit ")]),8,na),(0,l.Lk)("button",{onClick:t=>s.confirmDelete(e),class:"btn btn-delete"},t[4]||(t[4]=[(0,l.Lk)("i",{class:"fas fa-trash-alt"},null,-1),(0,l.eW)(" Delete ")]),8,ua)])):(0,l.Q3)("",!0)])))),128))])):((0,l.uX)(),(0,l.CE)("div",ra,[t[6]||(t[6]=(0,l.Lk)("p",null,"You haven't taken any quizzes yet.",-1)),(0,l.bF)(n,{to:"/",class:"btn btn-primary"},{default:(0,l.k6)((()=>t[5]||(t[5]=[(0,l.eW)("Browse Quizzes")]))),_:1})]))])]),s.showDeleteModal?((0,l.uX)(),(0,l.CE)("div",ca,[(0,l.Lk)("div",da,[t[8]||(t[8]=(0,l.Lk)("h3",null,"Confirm Delete",-1)),t[9]||(t[9]=(0,l.Lk)("p",null,"Are you sure you want to delete this quiz result?",-1)),t[10]||(t[10]=(0,l.Lk)("p",{class:"warning"},"This action cannot be undone!",-1)),(0,l.Lk)("div",pa,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.deleteQuiz&&s.deleteQuiz(...e)),class:"btn btn-delete",disabled:s.isLoading},(0,u.v_)(s.isLoading?"Deleting...":"Delete"),9,va),(0,l.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.cancelDelete&&s.cancelDelete(...e)),class:"btn btn-secondary"},"Cancel")])])])):(0,l.Q3)("",!0)])}var fa={setup(){const e=(0,z.KR)(null),t=(0,z.KR)([]),a=(0,z.KR)(!1),s=(0,m.rd)(),i=(0,z.KR)(!1),o=(0,z.KR)(!1),n=(0,z.KR)(null),u=async e=>{if(e){const t=await(0,k.x7)((0,k.H9)(h,"users",e.uid));a.value=t.data()?.admin??!1}else a.value=!1},r=async()=>{if(!g.currentUser)return;const e=(0,k.P)((0,k.rJ)(h,"quiz_results"),(0,k._M)("userId","==",g.currentUser.uid),(0,k.My)("timestamp","desc")),a=await(0,k.GG)(e);t.value=a.docs.map((e=>({id:e.id,...e.data()})))},c=e=>e>=.9?"excellent":e>=.7?"good":e>=.5?"fair":"needs-improvement",d=e=>e>=.9?"Excellent!":e>=.7?"Good Job!":e>=.5?"Fair":"Keep Practicing",p=e=>{s.push({name:"editQuiz",params:{id:e.quizId}})},v=e=>{n.value=e,o.value=!0},f=()=>{n.value=null,o.value=!1},b=async()=>{if(n.value)try{i.value=!0,await(0,k.kd)((0,k.H9)(h,"quiz_results",n.value.id)),await r()}catch(e){console.error("Error deleting quiz result:",e)}finally{i.value=!1,o.value=!1,n.value=null}};return(0,l.sV)((async()=>{e.value=g.currentUser,e.value&&await u(e.value),r()})),{user:e,quizHistory:t,isAdmin:a,getPerformanceClass:c,getPerformanceText:d,editQuiz:p,confirmDelete:v,cancelDelete:f,deleteQuiz:b,showDeleteModal:o,isLoading:i}}};const ka=(0,_.A)(fa,[["render",ma],["__scopeId","data-v-583db8dc"]]);var ba=ka;const La={class:"leaderboard-container"},ya={class:"leaderboard-tabs"},ha={key:0,class:"modal"},ga={class:"modal-content"},za={class:"modal-actions"},Ca=["disabled"],qa={key:1,class:"leaderboard-section"},Qa={class:"leaderboard-list"},wa={class:"user-info"},_a={class:"username"},Ea={class:"total-score"},Ra={class:"stats"},Ka={class:"stat"},Aa={class:"value"},Xa={class:"stat"},Da={class:"value"},Sa={key:2,class:"leaderboard-section"},Ta={class:"quiz-selector"},Ua=["value"],xa={key:0,class:"quiz-leaderboard"},Fa={class:"section-title"},Va={class:"leaderboard-list"},Ia={class:"user-info"},Ma={class:"username"},Ga={class:"score"},Ha={class:"percentage"};function Wa(e,t,a,i,o,n){return(0,l.uX)(),(0,l.CE)("div",La,[(0,l.Lk)("div",ya,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=e=>i.activeTab="global"),class:(0,u.C4)([{active:"global"===i.activeTab},"tab-button"])}," Global Leaderboard ",2),(0,l.Lk)("button",{onClick:t[1]||(t[1]=e=>i.activeTab="quiz"),class:(0,u.C4)([{active:"quiz"===i.activeTab},"tab-button"])}," Quiz Leaderboards ",2),i.isAdmin?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>i.confirmReset&&i.confirmReset(...e)),class:"tab-button reset-button"}," Reset Leaderboard ")):(0,l.Q3)("",!0)]),i.showResetModal?((0,l.uX)(),(0,l.CE)("div",ha,[(0,l.Lk)("div",ga,[t[6]||(t[6]=(0,l.Lk)("h3",null,"Reset Leaderboard",-1)),t[7]||(t[7]=(0,l.Lk)("p",null,"Are you sure you want to reset all user scores? This action cannot be undone!",-1)),(0,l.Lk)("div",za,[(0,l.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.resetLeaderboard&&i.resetLeaderboard(...e)),class:"btn btn-danger",disabled:i.isResetting},(0,u.v_)(i.isResetting?"Resetting...":"Reset"),9,Ca),(0,l.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.cancelReset&&i.cancelReset(...e)),class:"btn btn-secondary"},"Cancel")])])])):(0,l.Q3)("",!0),"global"===i.activeTab?((0,l.uX)(),(0,l.CE)("div",qa,[t[10]||(t[10]=(0,l.Lk)("h2",{class:"section-title"},"Top Performers",-1)),(0,l.Lk)("div",Qa,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.globalLeaderboard,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"leaderboard-item"},[(0,l.Lk)("div",{class:(0,u.C4)(["rank",{"top-three":a<3}])}," #"+(0,u.v_)(a+1),3),(0,l.Lk)("div",wa,[(0,l.Lk)("span",_a,(0,u.v_)(e.name),1),(0,l.Lk)("span",Ea,"Total Score: "+(0,u.v_)(e.totalScore),1)]),(0,l.Lk)("div",Ra,[(0,l.Lk)("div",Ka,[t[8]||(t[8]=(0,l.Lk)("span",{class:"label"},"Quizzes",-1)),(0,l.Lk)("span",Aa,(0,u.v_)(e.quizzesTaken),1)]),(0,l.Lk)("div",Xa,[t[9]||(t[9]=(0,l.Lk)("span",{class:"label"},"Avg. Score",-1)),(0,l.Lk)("span",Da,(0,u.v_)(Math.round(e.averageScore))+"%",1)])])])))),128))])])):((0,l.uX)(),(0,l.CE)("div",Sa,[(0,l.Lk)("div",Ta,[t[12]||(t[12]=(0,l.Lk)("label",{for:"quizSelect"},"Select Quiz:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.selectedQuiz=e),id:"quizSelect",class:"quiz-select"},[t[11]||(t[11]=(0,l.Lk)("option",{value:""},"Choose a quiz",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.quizzes,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,u.v_)(e.title),9,Ua)))),128))],512),[[s.u1,i.selectedQuiz]])]),i.selectedQuiz?((0,l.uX)(),(0,l.CE)("div",xa,[(0,l.Lk)("h2",Fa,(0,u.v_)(i.getQuizTitle(i.selectedQuiz))+" - Top Scores",1),(0,l.Lk)("div",Va,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.quizLeaderboard,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"leaderboard-item"},[(0,l.Lk)("div",{class:(0,u.C4)(["rank",{"top-three":t<3}])}," #"+(0,u.v_)(t+1),3),(0,l.Lk)("div",Ia,[(0,l.Lk)("span",Ma,(0,u.v_)(e.displayName),1),(0,l.Lk)("span",Ga,(0,u.v_)(e.score)+"/"+(0,u.v_)(e.totalQuestions),1)]),(0,l.Lk)("div",Ha,(0,u.v_)(Math.round(e.score/e.totalQuestions*100))+"% ",1)])))),128))])])):(0,l.Q3)("",!0)]))])}a(116);var Ja={name:"QuizLeaderboard",setup(){const e=(0,z.KR)("global"),t=(0,z.KR)([]),a=(0,z.KR)([]),s=(0,z.KR)([]),i=(0,z.KR)(""),o=(0,z.KR)(!1),n=(0,z.KR)(!1),u=(0,z.KR)(!1),r=async()=>{if(g.currentUser){const e=(0,k.H9)(h,"users",g.currentUser.uid),t=await(0,k.x7)(e);o.value=t.data()?.admin??!1}},c=()=>{n.value=!0},d=()=>{n.value=!1},p=async()=>{try{u.value=!0;const e=(0,k.wP)(h),t=await(0,k.GG)((0,k.rJ)(h,"users"));t.forEach((t=>{e.update((0,k.H9)(h,"users",t.id),{totalScore:0,quizzesTaken:0,averageScore:0})}));const a=await(0,k.GG)((0,k.rJ)(h,"quiz_results"));a.forEach((t=>{e.delete((0,k.H9)(h,"quiz_results",t.id))})),await e.commit(),await v(),n.value=!1}catch(e){console.error("Error resetting leaderboard:",e)}finally{u.value=!1}},v=async()=>{const e=(0,k.P)((0,k.rJ)(h,"users"),(0,k.My)("averageScore","desc"),(0,k.AB)(10)),a=await(0,k.GG)(e);t.value=a.docs.map((e=>({id:e.id,...e.data()})))},m=async()=>{const e=await(0,k.GG)((0,k.rJ)(h,"Quizzes"));s.value=e.docs.map((e=>({id:e.id,...e.data()})))},f=async e=>{if(e)try{const t=(0,k.P)((0,k.rJ)(h,"quiz_results"),(0,k._M)("quizId","==",e),(0,k.My)("score","desc"),(0,k.AB)(10)),s=await(0,k.GG)(t);a.value=s.docs.map((e=>({id:e.id,...e.data()})))}catch(t){if("failed-precondition"===t.code){const t=(0,k.P)((0,k.rJ)(h,"quiz_results"),(0,k._M)("quizId","==",e)),s=await(0,k.GG)(t),l=s.docs.map((e=>({id:e.id,...e.data()})));a.value=l.sort(((e,t)=>t.score-e.score)).slice(0,10)}else console.error("Error loading leaderboard:",t),a.value=[]}},b=e=>{const t=s.value.find((t=>t.id===e));return t?t.title:""};return(0,l.wB)(i,(e=>{e&&f(e)})),(0,l.sV)((()=>{v(),m(),r()})),{activeTab:e,globalLeaderboard:t,quizLeaderboard:a,quizzes:s,selectedQuiz:i,getQuizTitle:b,isAdmin:o,showResetModal:n,isResetting:u,confirmReset:c,cancelReset:d,resetLeaderboard:p}}};const Pa=(0,_.A)(Ja,[["render",Wa],["__scopeId","data-v-6fa3ebae"]]);var Oa=Pa;const Na=[{path:"/",name:"home",component:te},{path:"/Signup",name:"Signup",component:de},{path:"/Login",name:"Login",component:ye},{path:"/CreateQuizz",name:"Createquizz",component:$e,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/listquiz/:id",name:"quizdetail",component:_t},{path:"/edit-quiz/:id",name:"editQuiz",component:Nt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/profile",name:"profile",component:ba,meta:{requiresAuth:!0}},{path:"/leaderboard",name:"leaderboard",component:Oa}],Ba=(0,m.aE)({history:(0,m.LA)("/"),routes:Na});Ba.beforeEach((async(e,t,a)=>{const s=e.matched.some((e=>e.meta.requiresAuth)),l=e.matched.some((e=>e.meta.requiresAdmin)),i=g.currentUser;if(s&&!i)a("/login");else if(l)if(i){const e=await(0,k.x7)((0,k.H9)(h,"users",i.uid)),t=e.data()?.admin??!1;t?a():a("/")}else a("/login");else a()}));var ja=Ba;(0,s.Ef)(X).use(ja).mount("#app")}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,l,i){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],l=e[c][1],i=e[c][2];for(var n=!0,u=0;u<s.length;u++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[u])}))?s.splice(u--,1):(n=!1,i<o&&(o=i));if(n){e.splice(c--,1);var r=l();void 0!==r&&(t=r)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[s,l,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,i,o=s[0],n=s[1],u=s[2],r=0;if(o.some((function(t){return 0!==e[t]}))){for(l in n)a.o(n,l)&&(a.m[l]=n[l]);if(u)var c=u(a)}for(t&&t(s);r<o.length;r++)i=o[r],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},s=self["webpackChunkquizz_project"]=self["webpackChunkquizz_project"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(7396)}));s=a.O(s)})();
//# sourceMappingURL=app.45131517.js.map
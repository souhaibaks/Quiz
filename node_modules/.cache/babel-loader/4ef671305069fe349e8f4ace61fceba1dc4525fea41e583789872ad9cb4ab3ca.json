{"ast":null,"code":"import _regeneratorRuntime from \"/Users/souhaib./Quizz/Quiz/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/souhaib./Quizz/Quiz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport listQuiz from '@/components/listQuiz.vue';\nimport { auth, db } from '../firebase';\nimport { ref, onMounted } from 'vue';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { doc, getDoc } from 'firebase/firestore';\nexport default {\n  components: {\n    listQuiz: listQuiz\n  },\n  setup: function setup() {\n    var user = ref(null);\n    var is_admin = ref(null);\n    onMounted(function () {\n      onAuthStateChanged(auth, /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(u) {\n          var _userDoc$data$admin, _userDoc$data, userDoc;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                if (!u) {\n                  _context.next = 6;\n                  break;\n                }\n                user.value = u;\n                _context.next = 4;\n                return getDoc(doc(db, 'users', u.uid));\n              case 4:\n                userDoc = _context.sent;\n                is_admin.value = (_userDoc$data$admin = (_userDoc$data = userDoc.data()) === null || _userDoc$data === void 0 ? void 0 : _userDoc$data.admin) !== null && _userDoc$data$admin !== void 0 ? _userDoc$data$admin : false;\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }));\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    });\n    return {\n      user: user,\n      is_admin: is_admin\n    };\n  }\n};","map":{"version":3,"names":["listQuiz","auth","db","ref","onMounted","onAuthStateChanged","doc","getDoc","components","setup","user","is_admin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","u","_userDoc$data$admin","_userDoc$data","userDoc","wrap","_callee$","_context","prev","next","value","uid","sent","data","admin","stop","_x","apply","arguments"],"sources":["/Users/souhaib./Quizz/Quiz/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <router-link to=\"/Signup\">Sign Up</router-link>\n    <router-link to=\"/Login\">Login</router-link>\n    <router-link to=\"/CreateQuizz\" v-if=\"is_admin\">Create Quiz</router-link>\n  </div>\n  <h1 v-if=\"user\">Hello {{ user.displayName }}</h1>\n  <listQuiz/>\n  <RouterView/>\n</template>\n\n<script>\nimport listQuiz from '@/components/listQuiz.vue';\nimport {auth, db} from '../firebase'\nimport {ref, onMounted} from 'vue'\nimport { onAuthStateChanged } from 'firebase/auth';\nimport {doc, getDoc} from 'firebase/firestore'\n\nexport default {\n  components: {\n    listQuiz\n  },\n  setup() {\n    const user = ref(null);\n    const is_admin = ref(null)\n    onMounted(() => {\n      onAuthStateChanged(auth, async (u) => {\n        if (u) {\n          user.value = u\n          const userDoc = await getDoc(doc(db, 'users', u.uid))\n          is_admin.value = userDoc.data()?.admin ?? false\n\n        }\n      })\n\n    })\n\n    \n    return {\n      user,\n      is_admin\n    }\n  }\n  \n\n  \n  \n}\n</script>\n"],"mappings":";;AAYA,OAAOA,QAAO,MAAO,2BAA2B;AAChD,SAAQC,IAAI,EAAEC,EAAE,QAAO,aAAY;AACnC,SAAQC,GAAG,EAAEC,SAAS,QAAO,KAAI;AACjC,SAASC,kBAAiB,QAAS,eAAe;AAClD,SAAQC,GAAG,EAAEC,MAAM,QAAO,oBAAmB;AAE7C,eAAe;EACbC,UAAU,EAAE;IACVR,QAAO,EAAPA;EACF,CAAC;EACDS,KAAK,WAALA,KAAKA,CAAA,EAAG;IACN,IAAMC,IAAG,GAAIP,GAAG,CAAC,IAAI,CAAC;IACtB,IAAMQ,QAAO,GAAIR,GAAG,CAAC,IAAI;IACzBC,SAAS,CAAC,YAAM;MACdC,kBAAkB,CAACJ,IAAI;QAAA,IAAAW,IAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAC,QAAOC,CAAC;UAAA,IAAAC,mBAAA,EAAAC,aAAA,EAAAC,OAAA;UAAA,OAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA;YAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;gBAAA,KAC3BR,CAAC;kBAAAM,QAAA,CAAAE,IAAA;kBAAA;gBAAA;gBACHf,IAAI,CAACgB,KAAI,GAAIT,CAAA;gBAAAM,QAAA,CAAAE,IAAA;gBAAA,OACSlB,MAAM,CAACD,GAAG,CAACJ,EAAE,EAAE,OAAO,EAAEe,CAAC,CAACU,GAAG,CAAC;cAAA;gBAA9CP,OAAM,GAAAG,QAAA,CAAAK,IAAA;gBACZjB,QAAQ,CAACe,KAAI,IAAAR,mBAAA,IAAAC,aAAA,GAAIC,OAAO,CAACS,IAAI,CAAC,CAAC,cAAAV,aAAA,uBAAdA,aAAA,CAAgBW,KAAI,cAAAZ,mBAAA,cAAAA,mBAAA,GAAK,KAAI;cAAA;cAAA;gBAAA,OAAAK,QAAA,CAAAQ,IAAA;YAAA;UAAA,GAAAf,OAAA;QAAA,CAGjD;QAAA,iBAAAgB,EAAA;UAAA,OAAApB,IAAA,CAAAqB,KAAA,OAAAC,SAAA;QAAA;MAAA;IAEH,CAAC;IAGD,OAAO;MACLxB,IAAI,EAAJA,IAAI;MACJC,QAAO,EAAPA;IACF;EACF;AAKF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
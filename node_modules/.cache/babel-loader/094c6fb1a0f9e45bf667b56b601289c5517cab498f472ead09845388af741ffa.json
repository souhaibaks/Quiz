{"ast":null,"code":"import _regeneratorRuntime from \"/Users/souhaib./Quizz/Quiz/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/souhaib./Quizz/Quiz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport router from '@/router';\nimport { auth, db } from '../firebase';\nimport { createUserWithEmailAndPassword, updateProfile } from 'firebase/auth';\nimport { doc, setDoc } from 'firebase/firestore';\nimport { ref } from 'vue';\nexport default {\n  setup: function setup() {\n    var displayname = ref('');\n    var email = ref('');\n    var password = ref('');\n    var errors = ref(null);\n    var admin = ref(false);\n    var create_user = function create_user() {\n      createUserWithEmailAndPassword(auth, email.value, password.value).then(/*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userData) {\n          var user;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                user = userData.user;\n                _context.next = 3;\n                return setDoc(doc(db, 'users', user.uid), {\n                  name: displayname.value,\n                  email: email.value,\n                  admin: admin.value\n                });\n              case 3:\n                return _context.abrupt(\"return\", updateProfile(user, {\n                  displayName: displayname.value\n                }));\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }));\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()).then(function () {\n        router.push('/');\n      })[\"catch\"](function (error) {\n        errors.value = error.message;\n      });\n    };\n    return {\n      displayname: displayname,\n      email: email,\n      password: password,\n      errors: errors,\n      admin: admin,\n      create_user: create_user\n    };\n  }\n};","map":{"version":3,"names":["router","auth","db","createUserWithEmailAndPassword","updateProfile","doc","setDoc","ref","setup","displayname","email","password","errors","admin","create_user","value","then","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userData","user","wrap","_callee$","_context","prev","next","uid","name","abrupt","displayName","stop","_x","apply","arguments","push","error","message"],"sources":["/Users/souhaib./Quizz/Quiz/src/components/SignupForm.vue"],"sourcesContent":["<template>\n  <form @submit.prevent=\"create_user\">\n    <div class=\"form-group\">\n      <input type=\"text\" required placeholder=\"Display name\" v-model=\"displayname\">\n    </div>\n    <div class=\"form-group\">\n      <input type=\"email\" required placeholder=\"Your email\" v-model=\"email\">\n    </div>\n    <div class=\"form-group\">\n      <input type=\"password\" required placeholder=\"Your password\" v-model=\"password\">\n    </div>\n    <div class=\"form-group\">\n      <label for=\"admin\">Role: Admin?</label>\n      <input type=\"checkbox\" v-model=\"admin\">\n    </div>\n    <button type=\"submit\" class=\"btn btn-success\">Sign up</button>\n    <div class=\"error\">{{ errors }}</div>\n  </form>\n  \n</template>\n\n<script>\nimport router from '@/router';\nimport {auth, db} from '../firebase'\nimport { createUserWithEmailAndPassword, updateProfile } from 'firebase/auth';\nimport {doc, setDoc} from 'firebase/firestore'\nimport { ref } from 'vue';\n\n\n\nexport default {\n  setup() {\n    const displayname = ref('')\n    const email = ref('')\n    const password = ref('')\n    const errors = ref(null)\n    const admin = ref(false)\n    const create_user = () => {\n        createUserWithEmailAndPassword(auth, email.value, password.value)\n        .then( async (userData) => {\n          const user = userData.user;\n          await setDoc(doc(db , 'users', user.uid), {\n            name: displayname.value,\n            email: email.value,\n            admin: admin.value \n          })\n\n          return updateProfile(user, {displayName: displayname.value})\n        } \n        ) \n    \n        .then(\n          () => {\n            router.push('/')\n          }\n        )\n        .catch((error) => {\n          errors.value = error.message\n        })\n      }\n      return {\n      displayname, \n      email,\n      password,\n      errors,\n      admin,\n      create_user\n    }\n   \n  }\n}\n\n</script>\n\n<style>\n\n</style>"],"mappings":";;;AAsBA,OAAOA,MAAK,MAAO,UAAU;AAC7B,SAAQC,IAAI,EAAEC,EAAE,QAAO,aAAY;AACnC,SAASC,8BAA8B,EAAEC,aAAY,QAAS,eAAe;AAC7E,SAAQC,GAAG,EAAEC,MAAM,QAAO,oBAAmB;AAC7C,SAASC,GAAE,QAAS,KAAK;AAIzB,eAAe;EACbC,KAAK,WAALA,KAAKA,CAAA,EAAG;IACN,IAAMC,WAAU,GAAIF,GAAG,CAAC,EAAE;IAC1B,IAAMG,KAAI,GAAIH,GAAG,CAAC,EAAE;IACpB,IAAMI,QAAO,GAAIJ,GAAG,CAAC,EAAE;IACvB,IAAMK,MAAK,GAAIL,GAAG,CAAC,IAAI;IACvB,IAAMM,KAAI,GAAIN,GAAG,CAAC,KAAK;IACvB,IAAMO,WAAU,GAAI,SAAdA,WAAUA,CAAA,EAAU;MACtBX,8BAA8B,CAACF,IAAI,EAAES,KAAK,CAACK,KAAK,EAAEJ,QAAQ,CAACI,KAAK,EAC/DC,IAAI;QAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAC,QAAOC,QAAQ;UAAA,IAAAC,IAAA;UAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;YAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;gBACdL,IAAG,GAAID,QAAQ,CAACC,IAAI;gBAAAG,QAAA,CAAAE,IAAA;gBAAA,OACpBtB,MAAM,CAACD,GAAG,CAACH,EAAC,EAAI,OAAO,EAAEqB,IAAI,CAACM,GAAG,CAAC,EAAE;kBACxCC,IAAI,EAAErB,WAAW,CAACM,KAAK;kBACvBL,KAAK,EAAEA,KAAK,CAACK,KAAK;kBAClBF,KAAK,EAAEA,KAAK,CAACE;gBACf,CAAC;cAAA;gBAAA,OAAAW,QAAA,CAAAK,MAAA,WAEM3B,aAAa,CAACmB,IAAI,EAAE;kBAACS,WAAW,EAAEvB,WAAW,CAACM;gBAAK,CAAC;cAAA;cAAA;gBAAA,OAAAW,QAAA,CAAAO,IAAA;YAAA;UAAA,GAAAZ,OAAA;QAAA,CAC7D;QAAA,iBAAAa,EAAA;UAAA,OAAAjB,IAAA,CAAAkB,KAAA,OAAAC,SAAA;QAAA;MAAA,GACA,EAECpB,IAAI,CACH,YAAM;QACJhB,MAAM,CAACqC,IAAI,CAAC,GAAG;MACjB,CACF,UACM,CAAC,UAACC,KAAK,EAAK;QAChB1B,MAAM,CAACG,KAAI,GAAIuB,KAAK,CAACC,OAAM;MAC7B,CAAC;IACH;IACA,OAAO;MACP9B,WAAW,EAAXA,WAAW;MACXC,KAAK,EAALA,KAAK;MACLC,QAAQ,EAARA,QAAQ;MACRC,MAAM,EAANA,MAAM;MACNC,KAAK,EAALA,KAAK;MACLC,WAAU,EAAVA;IACF;EAEF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}